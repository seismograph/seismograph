define(["leaflet","d3","./addUSLeafletOverlay"],function(t,i,e){var n={id:"map",width:null,height:null,center:[37.545,-97.383],zoom:4,tile:"http://{s}.tiles.mapbox.com/v3/lukewhyte.iho02bc8/{z}/{x}/{y}.png",g:!0},s=function(t){return this.options=$.extend({},n,t),this.canvas=i.select("#"+this.options.id),this.init()};return s.prototype={setDimensions:function(){var t=this.options.width?this.options.width:parseInt(this.canvas.style("width")),i=this.options.height?this.options.height:.6*t;return{w:t,h:i}},buildMap:function(i){return this.canvas.style("height",i.h+"px"),new t.Map(this.options.id,{center:this.options.center,zoom:this.options.zoom}).addLayer(new t.TileLayer(this.options.tile))},init:function(){var t=this.options,e=this.setDimensions(),n=this.buildMap(e),s=i.select(n.getPanes().overlayPane).append("svg"),o=t.g?s.append("g").attr("class","leaflet-zoom-hide"):null;return{w:e.w,h:e.h,canvas:this.canvas,view:n,svg:s,g:o}}},mapAPI=function(t){var i=new s(t);return i.addUSLeafletOverlay=e(i),i}});