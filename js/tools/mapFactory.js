define(["leaflet","d3","./addUSLeafletOverlay"],function(t,i,n){var e={id:"map",width:null,height:null,center:[37.545,-97.383],zoom:4,minZoom:0,maxZoom:19,tile:"http://{s}.tiles.mapbox.com/v3/lukewhyte.iho02bc8/{z}/{x}/{y}.png",g:!0},o=function(t){return this.options=$.extend({},e,t),this.canvas=i.select("#"+this.options.id),this.init()};return o.prototype={setDimensions:function(){var t=this.options.width?this.options.width:parseInt(this.canvas.style("width")),i=this.options.height?this.options.height:.6*t;return{w:t,h:i}},buildMap:function(i){return this.canvas.style("height",i.h+"px"),new t.Map(this.options.id,{center:this.options.center,zoom:this.options.zoom,maxZoom:this.options.maxZoom,minZoom:this.options.minZoom}).addLayer(new t.TileLayer(this.options.tile))},init:function(){var t=this.options,n=this.setDimensions(),e=this.buildMap(n),o=i.select(e.getPanes().overlayPane).append("svg"),s=t.g?o.append("g").attr("class","leaflet-zoom-hide"):null;return{w:n.w,h:n.h,canvas:this.canvas,view:e,svg:o,g:s}}},mapAPI=function(t){var i=new o(t);return i.addUSLeafletOverlay=n(i),i}});