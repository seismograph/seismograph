define(["leaflet","d3","topojson"],function(t,e,n){return function(a){return function(o){e.json("../../data/geo-data/us.json",function(r,s){if(r)return console.error(r);var i={addFeature:function(t,e){return a.svg.append("g").attr("class","leaflet-zoom-hide").selectAll(t).data(n.feature(s,s.objects[e]).features).enter().append(t).attr("class",e)},addPath:function(){var n=function(e,n){var o=a.view.latLngToLayerPoint(new t.LatLng(n,e));this.stream.point(o.x,o.y)},o=function(){var t=e.geo.transform({point:n});return e.geo.path().projection(t)};return o()},reset:function(t){var e=a.path.bounds(n.feature(s,s.objects.counties)),o=e[0],r=e[1],i=function(t){t.attr("transform","translate("+-o[0]+","+-o[1]+")")};return a.svg.attr("width",r[0]-o[0]).attr("height",r[1]-o[1]).style("left",o[0]+"px").style("top",o[1]+"px"),$.each([a.counties,a.states],function(t,e){e&&i(e)}),t&&"function"==typeof t&&t(),a},setParams:function(){var t={states:!1,county:!1,onReady:!1};return $.extend({},t,o)},init:function(){var t=this.setParams();return a.counties=t.county?this.addFeature(t.county,"counties"):!1,a.states=t.states?this.addFeature(t.states,"states"):!1,a.path=this.addPath(),a.reset=this.reset,a.initialize=this.reset,t.onReady&&"function"==typeof t.onReady?t.onReady():void 0}};i.init()})}}});